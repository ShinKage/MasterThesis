\section{Second-order quantification}

\begin{definition}[Second-Order Linear Temporal Logic]
Let $\Sigma$ be a (multi-sorted) signature and $X$ a denumerable set of first-order variables typed over $S_\Sigma$, and
$\mathcal{X}$ a denumerable set of second-order variables typed over $S_\Sigma$. The set $\mathcal{F}_\Sigma$ of
formulae for Second-Order Linear Temporal Logic is the set generated by the following grammar:
\[
  \phi \Coloneqq tt \;|\; \epsilon_\tau \in \chi_\tau
                    \;|\; \neg\phi
                    \;|\; \phi \lor \phi
                    \;|\; \existss{x_\tau}{\phi}
                    \;|\; \existss{\chi_\tau}{\phi}
                    \;|\; \nextop{\phi}
                    \;|\; \until{\phi}{\phi}
\]
where $\epsilon \in \terms{\Sigma}{X}$, $\exists x_\tau$ ranges over first-order variables of sort $\tau \in S_\Sigma$,
$\exists \chi_\tau$ ranges over second-order variables of sort $\tau \in S_\Sigma$,
$O$ is a unary operator which states that $\phi$ must hold at the next step and $U$ is a binary operator which states
that the first formula must hold until the second formula holds at some point in the current or next steps.
\end{definition}

Other operators are derived the same as for First-Order Linear Temporal Logic, with the addition of equality, which in
this case becomes itself a derived operator, $\epsilon_\tau = \eta_\tau \equiv \foralls{\chi_\tau}(\epsilon_\tau \in
\chi_\tau \leftrightarrow \eta_\tau \in \chi_\tau)$.

\begin{definition}[Semantic of SO-LTL]
Let $M$ be a counterpart model, $\Gamma,\Delta$ respectively a first-order and second-order context, $(\sigma, w)$ a
pair substitution-world in the context $\Gamma,\Delta$.
The validity of a formula-in-context $\phi$, denoted $\semtwo{\sigma}{\xi}{w}{\Gamma}{\Delta}{\phi}$, is defined inductively as follows:
\begin{align*}
  (\sigma, \xi, w) &\vDash_\Gamma^\Delta tt \\
  (\sigma, \xi, w) &\vDash_\Gamma^\Delta \epsilon_\tau \in \chi_\tau
      &&\text{iff $\sigma(\epsilon)$ defined and } \sigma(\epsilon) \in \xi(\chi) \\
  (\sigma, \xi, w) &\vDash_\Gamma^\Delta \neg\phi
      &&\text{iff } \semntwo{\sigma}{\xi}{w}{\Gamma}{\Delta}{\phi} \\
  (\sigma, \xi, w) &\vDash_\Gamma^\Delta \phi_1 \lor \phi_2
      &&\text{iff } \semtwo{\sigma}{\xi}{w}{\Gamma}{\Delta}{\phi_1} \text{ or }
      \semtwo{\sigma}{\xi}{w}{\Gamma}{\Delta}{\phi_2} \\
  (\sigma, \xi, w) &\vDash_\Gamma^\Delta \existss{x_\tau}{\phi}
      &&\text{iff } \existss{v \in d(w)}{\semtwo{\ext{x}{\sigma}{v}}{\xi}{w}{\Gamma, x}{\Delta}{\phi}} \text{ with }
      x \not\in \Gamma \\
  (\sigma, \xi, w) &\vDash_\Gamma^\Delta \existss{\chi_\tau}{\phi}
      &&\text{iff } \existss{v \in 2^{d(w)}}{\semtwo{\sigma}{\ext{\chi}{\xi}{v}}{w}{\Gamma}{\Delta,\chi}{\phi}}
        \text{ with } \xi \not\in \Delta \\
  (\sigma, \xi, w) &\vDash_\Gamma^\Delta \nextop{\phi}
      &&\text{iff } \foralls{\worldcr{w}{cr}{w'}}{\semtwo{cr \circ \sigma}{2^{cr} \circ \xi}{w'}{\Gamma}{\Delta}{\phi}} \\
 (\sigma, \xi, w) &\vDash_\Gamma^\Delta \until{\phi_1}{\phi_2}
     &&\text{iff } \semtwo{\sigma}{\xi}{w}{\Gamma}{\Delta}{\phi_2} \text{ or } \\
     &&&\qquad(\semtwo{\sigma}{\xi}{w}{\Gamma}{\Delta}{\phi_1}
         \text { and } \foralls{\worldcr{w}{cr}{w'}}{\semtwo{cr \circ \sigma}{2^{cr} \circ \xi}{w'}{\Gamma}{\Delta}{\until{\phi_1}{\phi_2}}}) \\
\end{align*}
  Where $2^{cr}$ is the lifting of the partial function $cr$ to the power-set of the image, and $\text{ext}$ defined as
  in~\Cref{def:fosemantic}.
\end{definition}
